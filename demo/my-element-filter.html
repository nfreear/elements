<html>
<meta charset="utf-8">

<style>
  label {
    display: block;
    margin: .3rem 0;
    padding: .2rem 0;
  }

  [ data-my-element-filter = out ] {
    display: none;
  }

  my-element-filter::part(input) {
    font-size: inherit;
    padding: .2rem .5rem;
  }

  ::part(output) {
    font-style: italic;
  }

  fieldset {
    margin-top: 1rem;
  }

  ::part(dialog) {
    border-radius: .5rem;
  }

  ::part(p) {
    font-size: larger;
    margin: 1rem 1rem 3rem;
  }

  ::part(button),
  button {
    display: block;
    font-size: inherit;
    padding: .7rem 1.4rem;
    margin: auto;
  }
</style>

<title> my-element-filter </title>

<h1> my-element-filter idea </h1>

&hellip;

<h2 id="groupLabel">Choose a fruit</h2>

<form>

<my-element-filter
  selector="fieldset > label"
  label="Filter fruits"
  minlength="1"
  autocomplete="name"
  output-template="%d results found!"
  >
  <fieldset aria-labelledby="groupLabel">
    <!-- <legend>Choose a fruit</legend> -->
    <label><input type="checkbox" value="apple"> Apple</label>
    <label><input type="checkbox" value="banana"> Banana</label>
    <label><input type="checkbox" value="cherry"> Cherry — I'm a very, very, very, very long sentence.</label>
    <label><input type="checkbox" value="damson"> Damson</label>
    <label><input type="checkbox" value="elderberry"> Elderberry</label>
    <label><input type="checkbox" value="fig"> Fig</label>
    <label><input type="checkbox" value="goosebery"> Gooseberry</label>
    <label><input type="checkbox" value="hucklebery"> Huckleberry</label>
    <label><input type="checkbox" value="jackfruit"> Jackfruit</label>
    <label><input type="checkbox" value="kiwi"> Kiwi</label>
    <label><input type="checkbox" value="lemon"> Lemon</label>

  </fieldset>

</my-element-filter>


<p>
  <my-input autocomplete="email" type="email"
    data-aria-required="true" data-aria-errormessage="Email is required"
    data-aria-abc="ERROR"
    data-role="XX"
    >
    <label>my-input test <input /></label>
  </my-input>
</p>

<p>
  <my-captcha
    capture="true"
    sitekey="6Lc9DgMrAAAAAJMlezY7LWg8IpPCOGm51rEZDbnx"
    message="Hello! Please prove you’re not a robot."
    selector="#hidden_captcha"
    >
  </my-captcha>

  <input id="hidden_captcha">
</p>

<p>
  <button type="submit">Submit</button>
</p>

</form>


<script type="importmap">
{
  "imports": {
    "custom-elements": "../i.js",
    "my-elements": "../index.js"
  },
  "myElements": {
    "use": [ "my-element-filter", "my-input", "my-captcha" ]
  }
}
</script>

<script type="X__module">
  import { MyElementFilterElement, MyInputElement, MyCaptchaElement } from 'my-elements';

  customElements.define('my-element-filter', MyElementFilterElement);
  customElements.define('my-input', MyInputElement);
  customElements.define('my-captcha', MyCaptchaElement);
</script>

<script type="module">
  import 'custom-elements';
</script>

<script type="module">
  setTimeout(() => {
    const filterElem = document.querySelector('my-element-filter');
    filterElem.value = 'a';
  },
  250);

  const FORM = document.querySelector('form');
  FORM.addEventListener('submit', (ev) => {
    ev.preventDefault();
    console.debug('submit:', ev);
    setTimeout(() => alert('Form submit'), 500);
  });
</script>

</html>
